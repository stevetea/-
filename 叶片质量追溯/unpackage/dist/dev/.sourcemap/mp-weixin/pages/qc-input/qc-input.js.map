{"version":3,"file":"qc-input.js","sources":["pages/qc-input/qc-input.vue","F:/Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcWMtaW5wdXQvcWMtaW5wdXQudnVl"],"sourcesContent":["<template>\r\n  <view class=\"qc-input-container\">\r\n    <!-- 如果没有选择叶片，显示待质检叶片列表 -->\r\n    <view v-if=\"!bladeId\" class=\"blade-list-card\">\r\n      <view class=\"card-title\">选择待质检叶片</view>\r\n      <view class=\"list-header\">\r\n        <text class=\"list-tip\">请选择所有工艺已完成的叶片进行质检</text>\r\n      </view>\r\n      <view class=\"blade-list\" v-if=\"readyBlades.length > 0\">\r\n        <view \r\n          class=\"blade-item\" \r\n          v-for=\"(item, index) in readyBlades\" \r\n          :key=\"index\"\r\n          @click=\"selectBlade(item.blade_id)\"\r\n        >\r\n          <view class=\"blade-item-info\">\r\n            <text class=\"blade-sn\">{{ item.blade_sn }}</text>\r\n            <text class=\"blade-id\">ID: {{ item.blade_id }}</text>\r\n          </view>\r\n          <text class=\"select-arrow\">→</text>\r\n        </view>\r\n      </view>\r\n      <view class=\"empty-tip\" v-else-if=\"!loading\">\r\n        <text>暂无待质检的叶片</text>\r\n      </view>\r\n      <view class=\"loading-tip\" v-if=\"loading\">\r\n        <text>加载中...</text>\r\n      </view>\r\n    </view>\r\n    \r\n    <!-- 如果已选择叶片，显示质检录入表单 -->\r\n    <view v-else class=\"form-card\">\r\n      <view class=\"card-title\">最终质检报告</view>\r\n      \r\n      <!-- 返回按钮 -->\r\n      <view class=\"back-btn\" @click=\"goBackToList\">\r\n        <text>← 返回选择</text>\r\n      </view>\r\n      \r\n      <!-- 叶片信息 -->\r\n      <view class=\"blade-info\">\r\n        <view class=\"info-item\">\r\n          <text class=\"label\">叶片序列号：</text>\r\n          <text class=\"value\">{{ bladeInfo.blade_sn || '未知' }}</text>\r\n        </view>\r\n        <view class=\"info-item\">\r\n          <text class=\"label\">叶片ID：</text>\r\n          <text class=\"value\">{{ bladeId }}</text>\r\n        </view>\r\n        <view class=\"info-item\" v-if=\"bladeInfo.status\">\r\n          <text class=\"label\">当前状态：</text>\r\n          <text class=\"value\">{{ getStatusText(bladeInfo.status) }}</text>\r\n        </view>\r\n        <!-- 荧光检测结果 -->\r\n        <view class=\"info-item fluorescent-result\" v-if=\"fluorescentTest\">\r\n          <text class=\"label\">荧光检测结果：</text>\r\n          <view class=\"fluorescent-detail\">\r\n            <text class=\"value\" :class=\"fluorescentTest.is_success ? 'success' : 'fail'\">\r\n              {{ fluorescentTest.is_success ? '通过' : '不通过' }}\r\n            </text>\r\n            <text class=\"detail-text\" v-if=\"fluorescentTest.equipment_no\">\r\n              设备：{{ fluorescentTest.equipment_no }}\r\n            </text>\r\n            <text class=\"detail-text\" v-if=\"fluorescentTest.defect_count !== null && fluorescentTest.defect_count !== undefined\">\r\n              缺陷数量：{{ fluorescentTest.defect_count }}\r\n            </text>\r\n            <text class=\"detail-text\" v-if=\"fluorescentTest.inspector_notes\">\r\n              检查说明：{{ fluorescentTest.inspector_notes }}\r\n            </text>\r\n            <text class=\"detail-text\" v-if=\"fluorescentTest.fail_reason\">\r\n              失败原因：{{ fluorescentTest.fail_reason }}\r\n            </text>\r\n          </view>\r\n        </view>\r\n      </view>\r\n      \r\n      <!-- 质检结果 -->\r\n      <view class=\"form-section\">\r\n        <view class=\"section-title\">质检结论 *</view>\r\n        <view class=\"radio-group\">\r\n          <label class=\"radio-item\" @click=\"form.result = 'PASS'\">\r\n            <radio :checked=\"form.result === 'PASS'\" color=\"#667eea\" />\r\n            <text>通过</text>\r\n          </label>\r\n          <label class=\"radio-item\" @click=\"form.result = 'FAIL'\">\r\n            <radio :checked=\"form.result === 'FAIL'\" color=\"#667eea\" />\r\n            <text>不通过</text>\r\n          </label>\r\n        </view>\r\n      </view>\r\n      \r\n      <!-- 尺寸检查 -->\r\n      <view class=\"form-section\">\r\n        <view class=\"section-title\">尺寸检查 *</view>\r\n        <view class=\"radio-group\">\r\n          <label class=\"radio-item\" @click=\"form.dimension_pass = 1\">\r\n            <radio :checked=\"form.dimension_pass === 1\" color=\"#667eea\" />\r\n            <text>合格</text>\r\n          </label>\r\n          <label class=\"radio-item\" @click=\"form.dimension_pass = 0\">\r\n            <radio :checked=\"form.dimension_pass === 0\" color=\"#667eea\" />\r\n            <text>不合格</text>\r\n          </label>\r\n        </view>\r\n      </view>\r\n      \r\n      <!-- 外观检查 -->\r\n      <view class=\"form-section\">\r\n        <view class=\"section-title\">外观/表面检查 *</view>\r\n        <view class=\"radio-group\">\r\n          <label class=\"radio-item\" @click=\"form.surface_pass = 1\">\r\n            <radio :checked=\"form.surface_pass === 1\" color=\"#667eea\" />\r\n            <text>合格</text>\r\n          </label>\r\n          <label class=\"radio-item\" @click=\"form.surface_pass = 0\">\r\n            <radio :checked=\"form.surface_pass === 0\" color=\"#667eea\" />\r\n            <text>不合格</text>\r\n          </label>\r\n        </view>\r\n      </view>\r\n      \r\n      <!-- 测量数据 -->\r\n      <view class=\"form-section\">\r\n        <view class=\"section-title\">测量数据</view>\r\n        <view class=\"input-group\">\r\n          <text class=\"input-label\">重量(g)</text>\r\n          <input \r\n            class=\"input\" \r\n            v-model=\"form.weight_g\" \r\n            type=\"digit\"\r\n            placeholder=\"请输入重量\"\r\n          />\r\n        </view>\r\n        <view class=\"input-group\">\r\n          <text class=\"input-label\">关键尺寸(mm)</text>\r\n          <input \r\n            class=\"input\" \r\n            v-model=\"form.key_dimension_mm\" \r\n            type=\"digit\"\r\n            placeholder=\"请输入关键尺寸\"\r\n          />\r\n        </view>\r\n      </view>\r\n      \r\n      <!-- 缺陷等级（不通过时必填） -->\r\n      <view class=\"form-section\" v-if=\"form.result === 'FAIL'\">\r\n        <view class=\"section-title\">缺陷等级 *</view>\r\n        <picker \r\n          mode=\"selector\" \r\n          :range=\"defectLevels\" \r\n          range-key=\"label\"\r\n          :value=\"defectLevelIndex\"\r\n          @change=\"onDefectLevelChange\"\r\n        >\r\n          <view class=\"picker\">\r\n            {{ defectLevels[defectLevelIndex].label }}\r\n          </view>\r\n        </picker>\r\n      </view>\r\n      \r\n      <!-- 不合格单号（不通过时） -->\r\n      <view class=\"form-section\" v-if=\"form.result === 'FAIL'\">\r\n        <view class=\"section-title\">不合格单号</view>\r\n        <input \r\n          class=\"input\" \r\n          v-model=\"form.ncr_no\" \r\n          placeholder=\"请输入不合格单号\"\r\n          maxlength=\"40\"\r\n        />\r\n      </view>\r\n      \r\n      <!-- 备注 -->\r\n      <view class=\"form-section\">\r\n        <view class=\"section-title\">备注</view>\r\n        <textarea \r\n          class=\"textarea\" \r\n          v-model=\"form.remarks\" \r\n          placeholder=\"请输入备注信息\"\r\n          maxlength=\"255\"\r\n        />\r\n      </view>\r\n      \r\n      <!-- 提交按钮 -->\r\n      <button \r\n        class=\"submit-btn\" \r\n        @click=\"handleSubmit\" \r\n        :loading=\"submitting\"\r\n        :disabled=\"hasExistingQC\"\r\n      >\r\n        {{ hasExistingQC ? '已质检，无法提交' : '提交质检报告' }}\r\n      </button>\r\n      \r\n      <!-- 已质检提示 -->\r\n      <view class=\"warning-tip\" v-if=\"hasExistingQC\">\r\n        <text>⚠️ 该叶片已经进行过质检，不能重复提交</text>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport { get, post } from '@/utils/request.js'\r\nimport storage from '@/utils/storage.js'\r\nimport { PROCESS_MAP, BLADE_STATUS_MAP } from '@/utils/config.js'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      bladeId: null,\r\n      bladeInfo: {},\r\n      fluorescentTest: null,  // 荧光检测记录\r\n      readyBlades: [],\r\n      loading: false,\r\n      form: {\r\n        result: 'PASS',\r\n        dimension_pass: 1,\r\n        surface_pass: 1,\r\n        weight_g: '',\r\n        key_dimension_mm: '',\r\n        defect_level: 'NONE',\r\n        ncr_no: '',\r\n        remarks: ''\r\n      },\r\n      hasExistingQC: false,  // 是否已有质检记录\r\n      defectLevels: [\r\n        { value: 'NONE', label: '无' },\r\n        { value: 'MINOR', label: '轻微' },\r\n        { value: 'MAJOR', label: '严重' },\r\n        { value: 'CRITICAL', label: '致命' }\r\n      ],\r\n      defectLevelIndex: 0,\r\n      submitting: false\r\n    }\r\n  },\r\n  onLoad(options) {\r\n    // 检查权限\r\n    const userInfo = storage.getUserInfo()\r\n    if (!userInfo || (userInfo.role !== 'QC' && userInfo.role !== 'ADMIN')) {\r\n      uni.showToast({\r\n        title: '无权限访问',\r\n        icon: 'none'\r\n      })\r\n      setTimeout(() => {\r\n        uni.navigateBack()\r\n      }, 1500)\r\n      return\r\n    }\r\n    \r\n    // 如果传入了bladeId，直接加载叶片信息\r\n    if (options.bladeId) {\r\n      this.bladeId = parseInt(options.bladeId)\r\n      if (this.bladeId) {\r\n        this.loadBladeInfo()\r\n      }\r\n    } else {\r\n      // 如果没有传入bladeId，加载待质检叶片列表\r\n      this.loadReadyBlades()\r\n    }\r\n  },\r\n  onShow() {\r\n    // 如果从其他页面返回且没有选择叶片，重新加载列表\r\n    if (!this.bladeId) {\r\n      this.loadReadyBlades()\r\n    }\r\n  },\r\n  methods: {\r\n    // 加载所有工艺已完成的叶片列表\r\n    async loadReadyBlades() {\r\n      this.loading = true\r\n      try {\r\n        // 获取所有叶片（排除已完成和报废的）\r\n        const res = await get('/blade/list', {\r\n          limit: 200\r\n        })\r\n        \r\n        if (!res || !res.data || !res.data.list) {\r\n          this.readyBlades = []\r\n          return\r\n        }\r\n        \r\n        const allBlades = res.data.list\r\n        const readyBlades = []\r\n        \r\n        console.log(`需要检查 ${allBlades.length} 个叶片，检查是否进行了荧光检测`)\r\n        \r\n        // 检查每个叶片是否进行了荧光检测（无论成功失败）\r\n        for (const blade of allBlades) {\r\n          // 跳过已完成和报废的叶片\r\n          if (blade.status === 'COMPLETED' || blade.status === 'SCRAPPED') {\r\n            continue\r\n          }\r\n          \r\n          try {\r\n            // 获取该叶片的追溯信息\r\n            const traceRes = await get(`/blade/${blade.blade_id}/trace`)\r\n            if (traceRes && traceRes.data && traceRes.data.processes) {\r\n              // 检查是否进行了荧光检测（无论成功失败）\r\n              const fluorescentProcess = traceRes.data.processes.find(\r\n                p => p.processCode === 'FLUORESCENT_TEST'\r\n              )\r\n              \r\n              // 如果进行了荧光检测，且还没有质检记录，则加入列表\r\n              if (fluorescentProcess && fluorescentProcess.record && !traceRes.data.qc) {\r\n                console.log(`叶片 ${blade.blade_id} (${blade.blade_sn}) 已进行荧光检测，可进行质检`)\r\n                readyBlades.push(blade)\r\n              } else {\r\n                console.log(`叶片 ${blade.blade_id} (${blade.blade_sn}) 未进行荧光检测或已有质检: 有荧光检测=${!!(fluorescentProcess && fluorescentProcess.record)}, 已有质检=${!!traceRes.data.qc}`)\r\n              }\r\n            }\r\n          } catch (error) {\r\n            // 如果获取追溯信息失败，跳过该叶片\r\n            console.error(`检查叶片 ${blade.blade_id} 失败:`, error)\r\n          }\r\n        }\r\n        \r\n        console.log(`找到 ${readyBlades.length} 个可质检的叶片`)\r\n        this.readyBlades = readyBlades\r\n      } catch (error) {\r\n        console.error('加载叶片列表失败:', error)\r\n        uni.showToast({\r\n          title: '加载失败',\r\n          icon: 'none'\r\n        })\r\n        this.readyBlades = []\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n    \r\n    // 选择叶片\r\n    selectBlade(bladeId) {\r\n      this.bladeId = bladeId\r\n      this.loadBladeInfo()\r\n    },\r\n    \r\n    // 返回列表\r\n    goBackToList() {\r\n      this.bladeId = null\r\n      this.bladeInfo = {}\r\n      this.fluorescentTest = null\r\n      // 重置表单\r\n      this.form = {\r\n        result: 'PASS',\r\n        dimension_pass: 1,\r\n        surface_pass: 1,\r\n        weight_g: '',\r\n        key_dimension_mm: '',\r\n        defect_level: 'NONE',\r\n        ncr_no: '',\r\n        remarks: ''\r\n      }\r\n      this.defectLevelIndex = 0\r\n      this.loadReadyBlades()\r\n    },\r\n    \r\n    async loadBladeInfo() {\r\n      try {\r\n        // 同时获取叶片信息和追溯信息，检查是否已完成所有工序\r\n        const [bladeRes, traceRes] = await Promise.all([\r\n          get(`/blade/${this.bladeId}`),\r\n          get(`/blade/${this.bladeId}/trace`)\r\n        ])\r\n        \r\n        if (bladeRes.data) {\r\n          this.bladeInfo = bladeRes.data\r\n          \r\n          // 检查是否已经质检过\r\n          if (traceRes.data && traceRes.data.qc) {\r\n            this.hasExistingQC = true\r\n            uni.showModal({\r\n              title: '提示',\r\n              content: '该叶片已经进行过质检，不能重复质检',\r\n              showCancel: false,\r\n              success: () => {\r\n                this.goBackToList()\r\n              }\r\n            })\r\n            return\r\n          } else {\r\n            this.hasExistingQC = false\r\n          }\r\n          \r\n          // 检查是否进行了荧光检测（无论成功失败）\r\n          if (traceRes.data && traceRes.data.processes) {\r\n            const fluorescentProcess = traceRes.data.processes.find(\r\n              p => p.processCode === 'FLUORESCENT_TEST'\r\n            )\r\n            \r\n            if (fluorescentProcess && fluorescentProcess.record) {\r\n              // 提取荧光检测记录信息\r\n              this.fluorescentTest = {\r\n                is_success: fluorescentProcess.isSuccess,\r\n                equipment_no: fluorescentProcess.record.equipment_no || '',\r\n                defect_count: fluorescentProcess.record.defect_count !== null && fluorescentProcess.record.defect_count !== undefined \r\n                  ? fluorescentProcess.record.defect_count : null,\r\n                inspector_notes: fluorescentProcess.record.inspector_notes || '',\r\n                fail_reason: fluorescentProcess.record.fail_reason || ''\r\n              }\r\n            } else {\r\n              // 如果没有荧光检测记录，提示用户\r\n              uni.showModal({\r\n                title: '提示',\r\n                content: '该叶片尚未进行荧光检测，无法进行质检录入。请先完成荧光检测。',\r\n                showCancel: false,\r\n                success: () => {\r\n                  this.goBackToList()\r\n                }\r\n              })\r\n              return\r\n            }\r\n          } else {\r\n            // 如果没有追溯信息，提示用户\r\n            uni.showModal({\r\n              title: '提示',\r\n              content: '无法获取叶片追溯信息，请重试',\r\n              showCancel: false,\r\n              success: () => {\r\n                this.goBackToList()\r\n              }\r\n            })\r\n            return\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('加载叶片信息失败:', error)\r\n        const errorMsg = error.message || error.data?.message || '加载失败'\r\n        uni.showToast({\r\n          title: errorMsg,\r\n          icon: 'none',\r\n          duration: 2000\r\n        })\r\n        // 延迟返回列表\r\n        setTimeout(() => {\r\n          this.goBackToList()\r\n        }, 2000)\r\n      }\r\n    },\r\n    \r\n    onDefectLevelChange(e) {\r\n      this.defectLevelIndex = parseInt(e.detail.value)\r\n      this.form.defect_level = this.defectLevels[this.defectLevelIndex].value\r\n    },\r\n    \r\n    validateForm() {\r\n      // 验证质检结论\r\n      if (!this.form.result) {\r\n        uni.showToast({\r\n          title: '请选择质检结论',\r\n          icon: 'none'\r\n        })\r\n        return false\r\n      }\r\n      \r\n      // 验证尺寸检查\r\n      if (this.form.dimension_pass === null || this.form.dimension_pass === undefined) {\r\n        uni.showToast({\r\n          title: '请选择尺寸检查结果',\r\n          icon: 'none'\r\n        })\r\n        return false\r\n      }\r\n      \r\n      // 验证外观检查\r\n      if (this.form.surface_pass === null || this.form.surface_pass === undefined) {\r\n        uni.showToast({\r\n          title: '请选择外观/表面检查结果',\r\n          icon: 'none'\r\n        })\r\n        return false\r\n      }\r\n      \r\n      // 不通过时的验证\r\n      if (this.form.result === 'FAIL') {\r\n        // 必须选择缺陷等级\r\n        if (this.form.defect_level === 'NONE') {\r\n          uni.showToast({\r\n            title: '不通过时必须选择缺陷等级',\r\n            icon: 'none'\r\n          })\r\n          return false\r\n        }\r\n        \r\n        // 建议填写不合格单号（可选但推荐）\r\n        // if (!this.form.ncr_no || !this.form.ncr_no.trim()) {\r\n        //   uni.showToast({\r\n        //     title: '不通过时建议填写不合格单号',\r\n        //     icon: 'none'\r\n        //   })\r\n        //   return false\r\n        // }\r\n      }\r\n      \r\n      // 验证数字格式\r\n      if (this.form.weight_g && isNaN(parseFloat(this.form.weight_g))) {\r\n        uni.showToast({\r\n          title: '重量格式不正确',\r\n          icon: 'none'\r\n        })\r\n        return false\r\n      }\r\n      \r\n      if (this.form.key_dimension_mm && isNaN(parseFloat(this.form.key_dimension_mm))) {\r\n        uni.showToast({\r\n          title: '关键尺寸格式不正确',\r\n          icon: 'none'\r\n        })\r\n        return false\r\n      }\r\n      \r\n      // 验证数值范围（可选）\r\n      if (this.form.weight_g) {\r\n        const weight = parseFloat(this.form.weight_g)\r\n        if (weight <= 0 || weight > 10000) {\r\n          uni.showToast({\r\n            title: '重量应在0-10000g之间',\r\n            icon: 'none'\r\n          })\r\n          return false\r\n        }\r\n      }\r\n      \r\n      if (this.form.key_dimension_mm) {\r\n        const dimension = parseFloat(this.form.key_dimension_mm)\r\n        if (dimension <= 0 || dimension > 1000) {\r\n          uni.showToast({\r\n            title: '关键尺寸应在0-1000mm之间',\r\n            icon: 'none'\r\n          })\r\n          return false\r\n        }\r\n      }\r\n      \r\n      return true\r\n    },\r\n    \r\n    async handleSubmit() {\r\n      // 检查是否已质检\r\n      if (this.hasExistingQC) {\r\n        uni.showToast({\r\n          title: '该叶片已质检，不能重复提交',\r\n          icon: 'none'\r\n        })\r\n        return\r\n      }\r\n      \r\n      if (!this.validateForm()) {\r\n        return\r\n      }\r\n      \r\n      this.submitting = true\r\n      \r\n      try {\r\n        const userInfo = storage.getUserInfo()\r\n        \r\n        const data = {\r\n          blade_id: this.bladeId,\r\n          inspector_id: userInfo.operator_id,\r\n          result: this.form.result,\r\n          dimension_pass: this.form.dimension_pass,\r\n          surface_pass: this.form.surface_pass,\r\n          weight_g: this.form.weight_g ? parseFloat(this.form.weight_g) : null,\r\n          key_dimension_mm: this.form.key_dimension_mm ? parseFloat(this.form.key_dimension_mm) : null,\r\n          defect_level: this.form.defect_level,\r\n          ncr_no: this.form.ncr_no || null,\r\n          remarks: this.form.remarks || null\r\n        }\r\n        \r\n        const res = await post('/qc', data)\r\n        \r\n        if (res && res.data) {\r\n          // 根据质检结果显示不同的提示\r\n          const resultText = this.form.result === 'PASS' ? '通过' : '不通过'\r\n          const statusText = this.form.result === 'PASS' ? '已完成' : '已报废'\r\n          \r\n          uni.showModal({\r\n            title: '提交成功',\r\n            content: `质检结论：${resultText}\\n叶片状态已更新为：${statusText}`,\r\n            showCancel: false,\r\n            success: () => {\r\n              // 返回列表，让质检员可以继续选择其他叶片\r\n              this.goBackToList()\r\n            }\r\n          })\r\n        }\r\n      } catch (error) {\r\n        console.error('提交失败:', error)\r\n        const errorMsg = error.message || error.data?.message || '提交失败，请重试'\r\n        uni.showToast({\r\n          title: errorMsg,\r\n          icon: 'none',\r\n          duration: 2000\r\n        })\r\n      } finally {\r\n        this.submitting = false\r\n      }\r\n    },\r\n    \r\n    getStatusText(status) {\r\n      return BLADE_STATUS_MAP[status] || status\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.qc-input-container {\r\n  min-height: 100vh;\r\n  background: #FFFFFF;\r\n  padding: 20rpx;\r\n}\r\n\r\n.form-card {\r\n  background: #ffffff;\r\n  border-radius: 20rpx;\r\n  padding: 30rpx;\r\n}\r\n\r\n.card-title {\r\n  font-size: 36rpx;\r\n  font-weight: bold;\r\n  color: #333333;\r\n  margin-bottom: 30rpx;\r\n  text-align: center;\r\n}\r\n\r\n.blade-info {\r\n  background: #f5f5f5;\r\n  border-radius: 10rpx;\r\n  padding: 20rpx;\r\n  margin-bottom: 30rpx;\r\n}\r\n\r\n.info-item {\r\n  display: flex;\r\n  margin-bottom: 10rpx;\r\n  font-size: 28rpx;\r\n}\r\n\r\n.info-item:last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.info-item .label {\r\n  color: #666666;\r\n  margin-right: 10rpx;\r\n}\r\n\r\n.info-item .value {\r\n  color: #333333;\r\n  font-weight: 500;\r\n}\r\n\r\n.fluorescent-result {\r\n  margin-top: 20rpx;\r\n  padding-top: 20rpx;\r\n  border-top: 1px solid #e5e5e5;\r\n}\r\n\r\n.fluorescent-detail {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 10rpx;\r\n  margin-top: 10rpx;\r\n}\r\n\r\n.fluorescent-detail .value {\r\n  font-size: 30rpx;\r\n  font-weight: bold;\r\n  padding: 8rpx 16rpx;\r\n  border-radius: 8rpx;\r\n  display: inline-block;\r\n  width: fit-content;\r\n}\r\n\r\n.fluorescent-detail .value.success {\r\n  background: #d4edda;\r\n  color: #155724;\r\n}\r\n\r\n.fluorescent-detail .value.fail {\r\n  background: #f8d7da;\r\n  color: #721c24;\r\n}\r\n\r\n.fluorescent-detail .detail-text {\r\n  font-size: 24rpx;\r\n  color: #666666;\r\n  line-height: 1.6;\r\n}\r\n\r\n.form-section {\r\n  margin-bottom: 40rpx;\r\n}\r\n\r\n.section-title {\r\n  font-size: 30rpx;\r\n  font-weight: 500;\r\n  color: #333333;\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.radio-group {\r\n  display: flex;\r\n  gap: 40rpx;\r\n}\r\n\r\n.radio-item {\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: 28rpx;\r\n  color: #333333;\r\n}\r\n\r\n.radio-item text {\r\n  margin-left: 10rpx;\r\n}\r\n\r\n.input-group {\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.input-group:last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.input-label {\r\n  display: block;\r\n  font-size: 26rpx;\r\n  color: #666666;\r\n  margin-bottom: 10rpx;\r\n}\r\n\r\n.input {\r\n  width: 100%;\r\n  height: 80rpx;\r\n  background: #f5f5f5;\r\n  border-radius: 10rpx;\r\n  padding: 0 20rpx;\r\n  font-size: 28rpx;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.textarea {\r\n  width: 100%;\r\n  min-height: 200rpx;\r\n  background: #f5f5f5;\r\n  border-radius: 10rpx;\r\n  padding: 20rpx;\r\n  font-size: 28rpx;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.picker {\r\n  width: 100%;\r\n  height: 80rpx;\r\n  background: #f5f5f5;\r\n  border-radius: 10rpx;\r\n  padding: 0 20rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: 28rpx;\r\n  color: #333333;\r\n}\r\n\r\n.submit-btn {\r\n  width: 100%;\r\n  height: 88rpx;\r\n  background: linear-gradient(135deg, #FFB6C1 0%, #FFB6C1 100%);\r\n  color: #ffffff;\r\n  border-radius: 10rpx;\r\n  font-size: 32rpx;\r\n  font-weight: bold;\r\n  border: none;\r\n  margin-top: 40rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.submit-btn::after {\r\n  border: none;\r\n}\r\n\r\n/* 叶片列表样式 */\r\n.blade-list-card {\r\n  background: #ffffff;\r\n  border-radius: 20rpx;\r\n  padding: 30rpx;\r\n  min-height: calc(100vh - 40rpx);\r\n}\r\n\r\n.list-header {\r\n  margin-bottom: 30rpx;\r\n}\r\n\r\n.list-tip {\r\n  font-size: 26rpx;\r\n  color: #666666;\r\n  line-height: 1.6;\r\n}\r\n\r\n.blade-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20rpx;\r\n}\r\n\r\n.blade-item {\r\n  background: #f8f9fa;\r\n  border-radius: 15rpx;\r\n  padding: 30rpx;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.blade-item:active {\r\n  background: #e9ecef;\r\n  transform: scale(0.98);\r\n}\r\n\r\n.blade-item-info {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 10rpx;\r\n}\r\n\r\n.blade-sn {\r\n  font-size: 32rpx;\r\n  font-weight: bold;\r\n  color: #333333;\r\n}\r\n\r\n.blade-id {\r\n  font-size: 24rpx;\r\n  color: #999999;\r\n}\r\n\r\n.select-arrow {\r\n  font-size: 36rpx;\r\n  color: #667eea;\r\n}\r\n\r\n.empty-tip {\r\n  text-align: center;\r\n  padding: 100rpx 0;\r\n  color: #999999;\r\n  font-size: 28rpx;\r\n}\r\n\r\n.loading-tip {\r\n  text-align: center;\r\n  padding: 100rpx 0;\r\n  color: #999999;\r\n  font-size: 28rpx;\r\n}\r\n\r\n.back-btn {\r\n  margin-bottom: 20rpx;\r\n  padding: 15rpx 0;\r\n  color: #667eea;\r\n  font-size: 28rpx;\r\n  text-align: left;\r\n}\r\n\r\n.warning-tip {\r\n  margin-top: 20rpx;\r\n  padding: 20rpx;\r\n  background: #fff3cd;\r\n  border-radius: 10rpx;\r\n  text-align: center;\r\n  font-size: 26rpx;\r\n  color: #856404;\r\n}\r\n\r\n.submit-btn[disabled] {\r\n  background: #cccccc !important;\r\n  color: #999999 !important;\r\n  opacity: 0.6;\r\n}\r\n</style>\r\n\r\n","import MiniProgramPage from 'D:/yepian3/yepian/叶片质量追溯/pages/qc-input/qc-input.vue'\nwx.createPage(MiniProgramPage)"],"names":["storage","uni","get","post","BLADE_STATUS_MAP"],"mappings":";;;;;AA6MA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,SAAS;AAAA,MACT,WAAW,CAAE;AAAA,MACb,iBAAiB;AAAA;AAAA,MACjB,aAAa,CAAE;AAAA,MACf,SAAS;AAAA,MACT,MAAM;AAAA,QACJ,QAAQ;AAAA,QACR,gBAAgB;AAAA,QAChB,cAAc;AAAA,QACd,UAAU;AAAA,QACV,kBAAkB;AAAA,QAClB,cAAc;AAAA,QACd,QAAQ;AAAA,QACR,SAAS;AAAA,MACV;AAAA,MACD,eAAe;AAAA;AAAA,MACf,cAAc;AAAA,QACZ,EAAE,OAAO,QAAQ,OAAO,IAAK;AAAA,QAC7B,EAAE,OAAO,SAAS,OAAO,KAAM;AAAA,QAC/B,EAAE,OAAO,SAAS,OAAO,KAAM;AAAA,QAC/B,EAAE,OAAO,YAAY,OAAO,KAAK;AAAA,MAClC;AAAA,MACD,kBAAkB;AAAA,MAClB,YAAY;AAAA,IACd;AAAA,EACD;AAAA,EACD,OAAO,SAAS;AAEd,UAAM,WAAWA,cAAO,QAAC,YAAY;AACrC,QAAI,CAAC,YAAa,SAAS,SAAS,QAAQ,SAAS,SAAS,SAAU;AACtEC,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,MAAM;AAAA,OACP;AACD,iBAAW,MAAM;AACfA,sBAAAA,MAAI,aAAa;AAAA,MAClB,GAAE,IAAI;AACP;AAAA,IACF;AAGA,QAAI,QAAQ,SAAS;AACnB,WAAK,UAAU,SAAS,QAAQ,OAAO;AACvC,UAAI,KAAK,SAAS;AAChB,aAAK,cAAc;AAAA,MACrB;AAAA,WACK;AAEL,WAAK,gBAAgB;AAAA,IACvB;AAAA,EACD;AAAA,EACD,SAAS;AAEP,QAAI,CAAC,KAAK,SAAS;AACjB,WAAK,gBAAgB;AAAA,IACvB;AAAA,EACD;AAAA,EACD,SAAS;AAAA;AAAA,IAEP,MAAM,kBAAkB;AACtB,WAAK,UAAU;AACf,UAAI;AAEF,cAAM,MAAM,MAAMC,cAAG,IAAC,eAAe;AAAA,UACnC,OAAO;AAAA,SACR;AAED,YAAI,CAAC,OAAO,CAAC,IAAI,QAAQ,CAAC,IAAI,KAAK,MAAM;AACvC,eAAK,cAAc,CAAC;AACpB;AAAA,QACF;AAEA,cAAM,YAAY,IAAI,KAAK;AAC3B,cAAM,cAAc,CAAC;AAErBD,4BAAY,MAAA,OAAA,sCAAA,QAAQ,UAAU,MAAM,kBAAkB;AAGtD,mBAAW,SAAS,WAAW;AAE7B,cAAI,MAAM,WAAW,eAAe,MAAM,WAAW,YAAY;AAC/D;AAAA,UACF;AAEA,cAAI;AAEF,kBAAM,WAAW,MAAMC,kBAAI,UAAU,MAAM,QAAQ,QAAQ;AAC3D,gBAAI,YAAY,SAAS,QAAQ,SAAS,KAAK,WAAW;AAExD,oBAAM,qBAAqB,SAAS,KAAK,UAAU;AAAA,gBACjD,OAAK,EAAE,gBAAgB;AAAA,cACzB;AAGA,kBAAI,sBAAsB,mBAAmB,UAAU,CAAC,SAAS,KAAK,IAAI;AACxED,8BAAAA,MAAY,MAAA,OAAA,sCAAA,MAAM,MAAM,QAAQ,KAAK,MAAM,QAAQ,iBAAiB;AACpE,4BAAY,KAAK,KAAK;AAAA,qBACjB;AACLA,uFAAY,MAAM,MAAM,QAAQ,KAAK,MAAM,QAAQ,yBAAyB,CAAC,EAAE,sBAAsB,mBAAmB,OAAO,UAAU,CAAC,CAAC,SAAS,KAAK,EAAE,EAAE;AAAA,cAC/J;AAAA,YACF;AAAA,UACA,SAAO,OAAO;AAEdA,qFAAc,QAAQ,MAAM,QAAQ,QAAQ,KAAK;AAAA,UACnD;AAAA,QACF;AAEAA,4BAAY,MAAA,OAAA,sCAAA,MAAM,YAAY,MAAM,UAAU;AAC9C,aAAK,cAAc;AAAA,MACnB,SAAO,OAAO;AACdA,sBAAAA,MAAc,MAAA,SAAA,sCAAA,aAAa,KAAK;AAChCA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,SACP;AACD,aAAK,cAAc,CAAC;AAAA,MACtB,UAAU;AACR,aAAK,UAAU;AAAA,MACjB;AAAA,IACD;AAAA;AAAA,IAGD,YAAY,SAAS;AACnB,WAAK,UAAU;AACf,WAAK,cAAc;AAAA,IACpB;AAAA;AAAA,IAGD,eAAe;AACb,WAAK,UAAU;AACf,WAAK,YAAY,CAAC;AAClB,WAAK,kBAAkB;AAEvB,WAAK,OAAO;AAAA,QACV,QAAQ;AAAA,QACR,gBAAgB;AAAA,QAChB,cAAc;AAAA,QACd,UAAU;AAAA,QACV,kBAAkB;AAAA,QAClB,cAAc;AAAA,QACd,QAAQ;AAAA,QACR,SAAS;AAAA,MACX;AACA,WAAK,mBAAmB;AACxB,WAAK,gBAAgB;AAAA,IACtB;AAAA,IAED,MAAM,gBAAgB;;AACpB,UAAI;AAEF,cAAM,CAAC,UAAU,QAAQ,IAAI,MAAM,QAAQ,IAAI;AAAA,UAC7CC,cAAAA,IAAI,UAAU,KAAK,OAAO,EAAE;AAAA,UAC5BA,cAAAA,IAAI,UAAU,KAAK,OAAO,QAAQ;AAAA,SACnC;AAED,YAAI,SAAS,MAAM;AACjB,eAAK,YAAY,SAAS;AAG1B,cAAI,SAAS,QAAQ,SAAS,KAAK,IAAI;AACrC,iBAAK,gBAAgB;AACrBD,0BAAAA,MAAI,UAAU;AAAA,cACZ,OAAO;AAAA,cACP,SAAS;AAAA,cACT,YAAY;AAAA,cACZ,SAAS,MAAM;AACb,qBAAK,aAAa;AAAA,cACpB;AAAA,aACD;AACD;AAAA,iBACK;AACL,iBAAK,gBAAgB;AAAA,UACvB;AAGA,cAAI,SAAS,QAAQ,SAAS,KAAK,WAAW;AAC5C,kBAAM,qBAAqB,SAAS,KAAK,UAAU;AAAA,cACjD,OAAK,EAAE,gBAAgB;AAAA,YACzB;AAEA,gBAAI,sBAAsB,mBAAmB,QAAQ;AAEnD,mBAAK,kBAAkB;AAAA,gBACrB,YAAY,mBAAmB;AAAA,gBAC/B,cAAc,mBAAmB,OAAO,gBAAgB;AAAA,gBACxD,cAAc,mBAAmB,OAAO,iBAAiB,QAAQ,mBAAmB,OAAO,iBAAiB,SACxG,mBAAmB,OAAO,eAAe;AAAA,gBAC7C,iBAAiB,mBAAmB,OAAO,mBAAmB;AAAA,gBAC9D,aAAa,mBAAmB,OAAO,eAAe;AAAA,cACxD;AAAA,mBACK;AAELA,4BAAAA,MAAI,UAAU;AAAA,gBACZ,OAAO;AAAA,gBACP,SAAS;AAAA,gBACT,YAAY;AAAA,gBACZ,SAAS,MAAM;AACb,uBAAK,aAAa;AAAA,gBACpB;AAAA,eACD;AACD;AAAA,YACF;AAAA,iBACK;AAELA,0BAAAA,MAAI,UAAU;AAAA,cACZ,OAAO;AAAA,cACP,SAAS;AAAA,cACT,YAAY;AAAA,cACZ,SAAS,MAAM;AACb,qBAAK,aAAa;AAAA,cACpB;AAAA,aACD;AACD;AAAA,UACF;AAAA,QACF;AAAA,MACA,SAAO,OAAO;AACdA,sBAAAA,MAAc,MAAA,SAAA,sCAAA,aAAa,KAAK;AAChC,cAAM,WAAW,MAAM,aAAW,WAAM,SAAN,mBAAY,YAAW;AACzDA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,SACX;AAED,mBAAW,MAAM;AACf,eAAK,aAAa;AAAA,QACnB,GAAE,GAAI;AAAA,MACT;AAAA,IACD;AAAA,IAED,oBAAoB,GAAG;AACrB,WAAK,mBAAmB,SAAS,EAAE,OAAO,KAAK;AAC/C,WAAK,KAAK,eAAe,KAAK,aAAa,KAAK,gBAAgB,EAAE;AAAA,IACnE;AAAA,IAED,eAAe;AAEb,UAAI,CAAC,KAAK,KAAK,QAAQ;AACrBA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,SACP;AACD,eAAO;AAAA,MACT;AAGA,UAAI,KAAK,KAAK,mBAAmB,QAAQ,KAAK,KAAK,mBAAmB,QAAW;AAC/EA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,SACP;AACD,eAAO;AAAA,MACT;AAGA,UAAI,KAAK,KAAK,iBAAiB,QAAQ,KAAK,KAAK,iBAAiB,QAAW;AAC3EA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,SACP;AACD,eAAO;AAAA,MACT;AAGA,UAAI,KAAK,KAAK,WAAW,QAAQ;AAE/B,YAAI,KAAK,KAAK,iBAAiB,QAAQ;AACrCA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO;AAAA,YACP,MAAM;AAAA,WACP;AACD,iBAAO;AAAA,QACT;AAAA,MAUF;AAGA,UAAI,KAAK,KAAK,YAAY,MAAM,WAAW,KAAK,KAAK,QAAQ,CAAC,GAAG;AAC/DA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,SACP;AACD,eAAO;AAAA,MACT;AAEA,UAAI,KAAK,KAAK,oBAAoB,MAAM,WAAW,KAAK,KAAK,gBAAgB,CAAC,GAAG;AAC/EA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,SACP;AACD,eAAO;AAAA,MACT;AAGA,UAAI,KAAK,KAAK,UAAU;AACtB,cAAM,SAAS,WAAW,KAAK,KAAK,QAAQ;AAC5C,YAAI,UAAU,KAAK,SAAS,KAAO;AACjCA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO;AAAA,YACP,MAAM;AAAA,WACP;AACD,iBAAO;AAAA,QACT;AAAA,MACF;AAEA,UAAI,KAAK,KAAK,kBAAkB;AAC9B,cAAM,YAAY,WAAW,KAAK,KAAK,gBAAgB;AACvD,YAAI,aAAa,KAAK,YAAY,KAAM;AACtCA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO;AAAA,YACP,MAAM;AAAA,WACP;AACD,iBAAO;AAAA,QACT;AAAA,MACF;AAEA,aAAO;AAAA,IACR;AAAA,IAED,MAAM,eAAe;;AAEnB,UAAI,KAAK,eAAe;AACtBA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,SACP;AACD;AAAA,MACF;AAEA,UAAI,CAAC,KAAK,gBAAgB;AACxB;AAAA,MACF;AAEA,WAAK,aAAa;AAElB,UAAI;AACF,cAAM,WAAWD,cAAO,QAAC,YAAY;AAErC,cAAM,OAAO;AAAA,UACX,UAAU,KAAK;AAAA,UACf,cAAc,SAAS;AAAA,UACvB,QAAQ,KAAK,KAAK;AAAA,UAClB,gBAAgB,KAAK,KAAK;AAAA,UAC1B,cAAc,KAAK,KAAK;AAAA,UACxB,UAAU,KAAK,KAAK,WAAW,WAAW,KAAK,KAAK,QAAQ,IAAI;AAAA,UAChE,kBAAkB,KAAK,KAAK,mBAAmB,WAAW,KAAK,KAAK,gBAAgB,IAAI;AAAA,UACxF,cAAc,KAAK,KAAK;AAAA,UACxB,QAAQ,KAAK,KAAK,UAAU;AAAA,UAC5B,SAAS,KAAK,KAAK,WAAW;AAAA,QAChC;AAEA,cAAM,MAAM,MAAMG,mBAAK,OAAO,IAAI;AAElC,YAAI,OAAO,IAAI,MAAM;AAEnB,gBAAM,aAAa,KAAK,KAAK,WAAW,SAAS,OAAO;AACxD,gBAAM,aAAa,KAAK,KAAK,WAAW,SAAS,QAAQ;AAEzDF,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO;AAAA,YACP,SAAS,QAAQ,UAAU;AAAA,WAAc,UAAU;AAAA,YACnD,YAAY;AAAA,YACZ,SAAS,MAAM;AAEb,mBAAK,aAAa;AAAA,YACpB;AAAA,WACD;AAAA,QACH;AAAA,MACA,SAAO,OAAO;AACdA,sBAAAA,MAAc,MAAA,SAAA,sCAAA,SAAS,KAAK;AAC5B,cAAM,WAAW,MAAM,aAAW,WAAM,SAAN,mBAAY,YAAW;AACzDA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,SACX;AAAA,MACH,UAAU;AACR,aAAK,aAAa;AAAA,MACpB;AAAA,IACD;AAAA,IAED,cAAc,QAAQ;AACpB,aAAOG,aAAgB,iBAAC,MAAM,KAAK;AAAA,IACrC;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxlBA,GAAG,WAAW,eAAe;"}