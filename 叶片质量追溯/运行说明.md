# 运行说明

## 重要提示

uni-app 项目需要先编译才能运行，不能直接在微信开发者工具中打开源代码目录。

## 正确的运行方式

### 方法一：使用 HBuilderX（推荐）

1. **下载安装 HBuilderX**
   - 访问：https://www.dcloud.io/hbuilderx.html
   - 下载"App开发版"

2. **打开项目**
   - 打开 HBuilderX
   - 文件 → 打开目录 → 选择 `叶片质量追溯` 文件夹

3. **运行项目**
   - 点击工具栏的"运行"按钮
   - 选择"运行到小程序模拟器" → "微信开发者工具"
   - HBuilderX 会自动编译并打开微信开发者工具

4. **如果微信开发者工具没有自动打开**
   - 在 HBuilderX 中：工具 → 设置 → 运行配置
   - 设置微信开发者工具安装路径

### 方法二：使用命令行编译（需要 Node.js）

1. **安装依赖**
   ```bash
   cd 叶片质量追溯
   npm install
   ```

2. **编译项目**
   ```bash
   npm run dev:mp-weixin
   ```

3. **打开编译后的目录**
   - 在微信开发者工具中
   - 导入项目
   - 选择目录：`叶片质量追溯/unpackage/dist/dev/mp-weixin`

### 方法三：直接使用已编译的文件

如果项目已经编译过（有 `unpackage` 目录）：

1. 打开微信开发者工具
2. 导入项目
3. **重要**：选择目录 `叶片质量追溯/unpackage/dist/dev/mp-weixin`
   - 不要选择 `叶片质量追溯` 根目录
   - 必须选择编译后的目录

## 常见错误解决

### 错误：app.json 未找到

**原因**：直接在微信开发者工具中打开了源代码目录

**解决**：
1. 使用 HBuilderX 编译项目
2. 或在微信开发者工具中打开 `unpackage/dist/dev/mp-weixin` 目录

### 错误：页面路径不存在

**原因**：编译失败或页面配置错误

**解决**：
1. 检查 `pages.json` 中的路径是否正确
2. 确保所有页面文件都存在
3. 重新编译项目

### 错误：模块未找到

**原因**：工具类文件路径错误

**解决**：
1. 检查 `utils` 目录下的文件是否都存在
2. 检查导入路径是否正确（使用 `@/` 别名）

## 项目结构说明

```
叶片质量追溯/
├── pages/              # 源代码页面（.vue 文件）
├── utils/              # 工具类（源代码）
├── static/             # 静态资源
├── App.vue            # 应用入口
├── main.js            # 主入口
├── pages.json         # 页面配置
├── manifest.json      # 应用配置
└── unpackage/         # 编译输出目录（重要！）
    └── dist/
        └── dev/
            └── mp-weixin/  # 微信小程序编译结果
                ├── app.json  # 这个文件是编译生成的
                ├── pages/
                └── utils/
```

## 开发流程

1. **修改源代码**（在 `pages/`、`utils/` 等目录）
2. **保存文件**
3. **HBuilderX 自动编译**（或手动点击运行）
4. **在微信开发者工具中查看效果**

## 调试技巧

1. **查看编译日志**：HBuilderX 底部有编译日志
2. **查看控制台**：微信开发者工具的 Console
3. **查看网络请求**：微信开发者工具的 Network
4. **查看存储**：在控制台输入 `uni.getStorageSync('userInfo')`

## 注意事项

1. ✅ 必须使用 HBuilderX 编译，或打开编译后的目录
2. ✅ 不要直接在微信开发者工具中打开源代码目录
3. ✅ 修改代码后需要重新编译
4. ✅ Mock 数据已启用，无需后端即可测试

