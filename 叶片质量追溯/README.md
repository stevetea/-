# 叶片质量追溯系统 - 微信小程序

## 项目简介

基于 uni-app 开发的微信小程序，实现叶片生产全流程的质量追溯功能。

## 功能特性

- ✅ 用户登录认证（支持微信授权）
- ✅ 角色权限控制（操作员/质检员/管理员）
- ✅ 扫码追溯功能
- ✅ 工序记录查看（权限控制）
- ✅ 质检报告填写
- ✅ Mock 数据支持（无需后端即可测试）

## 技术栈

- **框架**: uni-app (Vue 3)
- **平台**: 微信小程序
- **状态管理**: 本地存储 (uni.storage)
- **网络请求**: uni.request

## 项目结构

```
叶片质量追溯/
├── pages/              # 页面文件
│   ├── login/         # 登录页
│   ├── index/         # 首页
│   ├── scan/          # 扫码页
│   ├── trace-detail/  # 追溯详情页
│   ├── qc-input/      # 质检报告页
│   └── blade-list/    # 叶片列表页
├── utils/             # 工具类
│   ├── config.js     # 配置文件
│   ├── request.js     # 请求封装
│   ├── storage.js     # 存储管理
│   ├── qrcode.js      # 二维码工具
│   └── mock.js        # Mock 数据
├── static/            # 静态资源
├── App.vue           # 应用入口
├── main.js           # 主入口
├── pages.json        # 页面配置
└── manifest.json     # 应用配置
```

## 快速开始

### 1. 环境要求

- HBuilderX 或 微信开发者工具
- Node.js (可选，用于安装依赖)

### 2. 安装依赖（可选）

```bash
npm install
```

### 3. 配置

1. 打开 `utils/config.js`，配置 API 地址（如果使用真实后端）
2. 打开 `utils/mock.js`，设置 `USE_MOCK = true`（使用 Mock 数据测试）

### 4. 运行项目

#### 方法一：使用 HBuilderX

1. 打开 HBuilderX
2. 文件 → 打开目录 → 选择项目文件夹
3. 运行 → 运行到小程序模拟器 → 微信开发者工具

#### 方法二：使用微信开发者工具

1. 打开微信开发者工具
2. 导入项目
3. 选择项目文件夹
4. 填写 AppID（可使用测试号）
5. 编译

### 5. 测试

详细测试步骤请参考：
- [快速测试步骤.md](./快速测试步骤.md)
- [测试指南.md](./测试指南.md)

## 测试账号（Mock 模式）

在登录页面输入以下名称测试不同角色：

- **操作员**：输入任意名称（如：`张园英`）
- **质检员**：输入包含"质检"的名称（如：`质检员`）
- **管理员**：输入包含"管理"的名称（如：`管理员`）

密码可以输入任意值（Mock 模式不验证）

## 测试数据

- **测试叶片ID**: 1
- **测试二维码内容**: `B1|P1:1,2:2,3:3`

## 权限说明

### 操作员 (OPERATOR)
- 可以查看自己操作的工序详情
- 可以看到其他操作员的工序，但看不到工艺参数
- 可以扫码追溯

### 质检员 (QC)
- 可以查看所有工序的完整信息
- 可以填写质检报告
- 可以查看待检列表

### 管理员 (ADMIN)
- 拥有所有权限
- 可以管理系统

## API 接口

详细接口文档请参考：[API接口文档.md](./API接口文档.md)

## 开发说明

### 切换 Mock 模式

在 `utils/mock.js` 中修改：
```javascript
export const USE_MOCK = true  // true: 使用 Mock 数据, false: 使用真实接口
```

### 配置后端地址

在 `utils/config.js` 中修改：
```javascript
const API_BASE_URL = 'https://your-api-domain.com/api'
```

## 常见问题

### Q: 如何测试扫码功能？

A: 
1. 使用真机预览（模拟器不支持扫码）
2. 或使用"手动输入叶片ID"功能

### Q: 登录后页面空白？

A: 检查 `pages.json` 中登录页是否在第一位，检查控制台错误信息

### Q: 数据不显示？

A: 
1. 确认 `USE_MOCK = true`
2. 检查控制台是否有错误
3. 确认已正确登录

## 更新日志

### v1.0.0 (2024-12-27)
- ✅ 初始版本
- ✅ 登录功能
- ✅ 角色权限控制
- ✅ 扫码追溯
- ✅ 质检报告
- ✅ Mock 数据支持

## 许可证

MIT

## 联系方式

如有问题，请查看文档或提交 Issue。

