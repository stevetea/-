# 检查后端是否正常运行

## 快速检查

### 1. 检查后端服务

打开浏览器访问：http://localhost:3000/health

**应该看到：**
```json
{
  "status": "ok",
  "timestamp": "2024-12-27T..."
}
```

**如果看不到：**
- 后端服务没有运行
- 需要启动后端：`cd backend && npm run dev`

### 2. 检查后端控制台

后端运行后，应该看到：
```
🚀 服务器运行在 http://localhost:3000
✅ 数据库连接成功
📝 API文档: http://localhost:3000/health
```

### 3. 测试接口

使用浏览器或 Postman 测试：

**健康检查：**
```
GET http://localhost:3000/health
```

**登录接口：**
```
POST http://localhost:3000/api/auth/login
Content-Type: application/json

{
  "operatorName": "张园英",
  "password": "123456"
}
```

**获取叶片列表（需要token）：**
```
GET http://localhost:3000/api/blade/list
Authorization: Bearer YOUR_TOKEN
```

## 常见问题

### 问题 1：404 错误

**原因：**
1. 后端服务没有运行
2. 接口路径不正确
3. 路由没有正确注册

**解决：**
1. 确认后端正在运行
2. 检查 `backend/app.js` 中的路由配置
3. 查看后端控制台的请求日志

### 问题 2：401 错误

**原因：**
1. 没有提供 token
2. Token 过期或无效
3. 未登录就访问需要认证的接口

**解决：**
1. 先登录获取 token
2. 检查 token 是否正确保存
3. 清除缓存重新登录

### 问题 3：数据库连接失败

**原因：**
1. 数据库密码错误
2. 数据库服务未运行
3. 数据库不存在

**解决：**
1. 检查 `.env` 文件配置
2. 运行 `node test-db.js` 测试连接
3. 确认数据库已创建

## 调试步骤

### 步骤 1：确认后端运行

```bash
cd backend
npm run dev
```

### 步骤 2：测试健康检查

浏览器访问：http://localhost:3000/health

### 步骤 3：测试登录接口

使用 Postman 或 curl：
```bash
curl -X POST http://localhost:3000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"operatorName":"张园英","password":"123456"}'
```

### 步骤 4：查看后端日志

后端控制台会显示所有请求：
```
2024-12-27T... - POST /api/auth/login
2024-12-27T... - GET /api/blade/list
```

如果看不到请求日志，说明请求没有到达后端。

