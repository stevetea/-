# 路由修复说明

## 已修复的问题

### 1. 404 错误 - 接口不存在

**问题**：
- `/api/blade/recent` 返回 404
- `/api/blade/my-recent` 返回 404
- `/api/blade/list` 返回 404

**原因**：
Express 路由是按顺序匹配的。`/:bladeId` 这个参数路由会匹配所有路径，包括 `/recent`、`/my-recent`、`/list`，导致这些具体路由无法被匹配到。

**修复**：
调整路由顺序，将具体路由放在参数路由之前：
1. `/my-recent` - 操作员的最近记录
2. `/recent` - 所有最近记录
3. `/list` - 叶片列表
4. `/:bladeId/trace` - 追溯信息
5. `/:bladeId` - 叶片基本信息（放在最后）

### 2. 页面不存在错误

**问题**：
- `pages/process-input/process-input` 页面不存在

**修复**：
将工序录入功能改为跳转到扫码页面，因为工序录入需要先扫码获取叶片信息。

## 测试步骤

### 1. 重启后端服务

```bash
cd backend
npm run dev
```

### 2. 测试接口

在浏览器或 Postman 中测试：

**获取最近记录（需要登录token）：**
```
GET http://localhost:3000/api/blade/recent?limit=10
Authorization: Bearer YOUR_TOKEN
```

**获取操作员的最近记录：**
```
GET http://localhost:3000/api/blade/my-recent?limit=10
Authorization: Bearer YOUR_TOKEN
```

**获取叶片列表：**
```
GET http://localhost:3000/api/blade/list?status=&limit=50
Authorization: Bearer YOUR_TOKEN
```

### 3. 重新编译小程序

在 HBuilderX 中：
1. 点击"运行" → "运行到小程序模拟器" → "微信开发者工具"
2. 等待编译完成
3. 测试功能

## 验证

修复后应该：
- ✅ `/api/blade/recent` 返回 200
- ✅ `/api/blade/my-recent` 返回 200
- ✅ `/api/blade/list` 返回 200
- ✅ 不再出现 404 错误
- ✅ 不再出现页面不存在错误

